<!DOCTYPE html>
<html ng-app="App">
<head>
  <title>LegoByMini</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
  <script src="main.js"></script>
  
  <style>
   #main{
     margin: 10px 0;
   }
   .ours{
     
   }
   .ours td{
/*     color: #3c763d;*/
     color: #000;
     font-weight: bolder;
     background: #dff0d8;
/*     border-color: #FFF !important;*/
   }
   
   .table{
     margin-top: 20px;
   }
   
   .small{
     font-size: 0.8em;
   }
   .gray{
     opacity: 0.6;
   }
   
   .dog-icon{
     width: 1em;
   }
   
  </style>
  
</head>

<body>
  
  <div id="main">
    <div class="container" ng-controller="ScoreBoardController" align="center">
      <div  ng-show="items.length > 0">
        

        <div class="pull-right" align="right">
          <a href="javascript:;" ng-click="load()" ng-disabled="loading" class="btn btn-primary">Refresh</a>
        </div>
        
        <div align="left">
          Order:
          <select ng-model="orderby" convert-to-number>
            <option value="place">Current</option>
            <option value="-totalRealtimeLikes">Realtime</option>
          </select>
        </div>
        
        <table class="table">
          <tr ng-repeat="item in items | orderBy:orderby" ng-class="{ours: (ours.indexOf(item.username) >= 0)}">
            <td width="50">{{$index + 1}} <sup class="small gray" ng-show="item.place - ($index + 1) != 0">
              <span ng-show="item.place - ($index + 1) > 0">+</span>{{item.place - ($index + 1)}}</sup></td>
            <td>{{item.username}}</td>
            
            <td>
              <nobr class="small gray" ng-show="countTotalRealtimeDogs(item.username) > 0"><img src="cry_dog_2x.png" class="dog-icon" />&nbsp;{{countTotalRealtimeDogs(item.username)}}</nobr>
            </td>
            
            <td align="left" width="80">
              <nobr>{{item.likes}}
              <sup class="small gray"><span ng-show="realtimeLikesDifference(item) > 0">+</span>{{realtimeLikesDifference(item)}}<sup></nobr>

              
<!-- 
              <div ng-repeat="media in user_medias[item.username]">
                {{medias[media.url].likes.fb}}
                
                <span ng-show="realtime_medias.fb[media.url] > 0 && realtime_medias.fb[media.url] - medias[media.url].likes.fb != 0">(+{{realtime_medias.fb[media.url] - medias[media.url].likes.fb}})</span>
                
                |
                
                {{medias[media.url].likes.vk}}
                
                <span ng-show="realtime_medias.vk[media.url] > 0 && countRealtimeVK(media.url) != 0">(<span ng-show="countRealtimeVK(media.url) > 0">+</span>{{countRealtimeVK(media.url)}})</span>
              </div>
              -->
              
            </td>
          </tr>
        </table>
      
        <div align="right"><a href="javascript:;" ng-click="load()" ng-disabled="loading" class="btn btn-primary">Refresh</a></div>
      </div>
      <div ng-hide="items.length > 0" align="center">
        Loading...
      </div>
      
    </div>
  </div>
  
  
</body>
</html>
